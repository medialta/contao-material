<!DOCTYPE html>
<html lang="<?= $this->language ?>">
<head>

    <meta charset="<?= $this->charset ?>">
    <title><?= $this->title ?> - Contao Open Source CMS <?= VERSION ?></title>
    <base href="<?= $this->base ?>">
    <meta name="generator" content="Contao Open Source CMS">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <?php if ($this->loadFonts): ?>
        <link rel="stylesheet" href="<?= TL_ASSETS_URL ?>system/themes/<?= $this->theme ?>/fonts.css">
    <?php endif; ?>
    <link rel="stylesheet" href="<?php
    $objCombiner = new Combiner();
    $objCombiner->add('assets/mootools/colorpicker/'. $GLOBALS['TL_ASSETS']['COLORPICKER'] .'/css/mooRainbow.css', $GLOBALS['TL_ASSETS']['COLORPICKER']);
    $objCombiner->add('assets/mootools/chosen/chosen.css');
    $objCombiner->add('assets/mootools/stylect/css/stylect.css');
    $objCombiner->add('assets/mootools/simplemodal/'. $GLOBALS['TL_ASSETS']['SIMPLEMODAL'] .'/css/simplemodal.css', $GLOBALS['TL_ASSETS']['SIMPLEMODAL']);
    $objCombiner->add('assets/mootools/datepicker/'. $GLOBALS['TL_ASSETS']['DATEPICKER'] .'/datepicker.css', $GLOBALS['TL_ASSETS']['DATEPICKER']);
    $objCombiner->add('system/themes/'. $this->theme .'/basic.css');
    $objCombiner->add('system/themes/'. $this->theme .'/main.css');
    echo $objCombiner->getCombinedFile();
    ?>">
    <!--[if IE]><link rel="stylesheet" href="<?= TL_ASSETS_URL ?>system/themes/<?= $this->theme ?>/iefixes.css"><![endif]-->
    <?= $this->stylesheets ?>
    <link rel="stylesheet" href="<?= TL_ASSETS_URL ?>system/modules/contao-material/assets/css/materialize.min.css"></link>
    <link rel="stylesheet" href="<?= TL_ASSETS_URL ?>system/modules/contao-material/assets/css/styles.css"></link>
    <link rel="stylesheet" href="<?= TL_ASSETS_URL ?>system/modules/contao-material/assets/css/styles-seb.css"></link>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <script type="text/javascript" src="<?= TL_ASSETS_URL ?>system/modules/contao-material/assets/js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="<?= TL_ASSETS_URL ?>system/modules/contao-material/assets/js/materialize.min.js"></script>
    <script><?= $this->getLocaleString() ?></script>
    <script><?= ''//$this->getDateString() ?></script>
    <?= ''//$this->javascripts ?>

</head>
<body id="top" class="<?= $this->ua ?><?php if ($this->isPopup) echo ' popup'; ?>">

    <?php if (!$this->isPopup): ?>
        <aside>
            <nav class="side-nav fixed">
                <ul id="modules-nav" class="side-nav fixed">
                    <li><h1><?= $this->backendModules ?></h1></li>
                    <?php foreach ($this->modules as $strGroup => $arrModules): ?>
                        <li class="no-padding">
                            <ul class="collapsible collapsible-accordion">
                                <li><!--
                                 --><a class="collapsible-header" href="<?= $arrModules['href'] ?>" title="<?= $arrModules['title'] ?>"><?= $arrModules['label'] ?></a>
                                    <?php if ($arrModules['modules']): ?>
                                        <div class="collapsible-body">
                                            <ul>
                                                <?php foreach ($arrModules['modules'] as $arrConfig): ?>
                                                    <li><a href="<?= $arrConfig['href'] ?>" class="<?= $arrConfig['class'] ?>" title="<?= $arrConfig['title'] ?>"<?= $arrConfig['icon'] ?>><?= $arrConfig['label'] ?></a></li>
                                                <?php endforeach; ?>
                                            </ul>
                                        </div>
                                    <?php endif; ?>
                                </li>
                            </ul>
                        </li>
                    <?php endforeach; ?>
                </ul>
            </nav>
        </aside>

        <header>
            <nav>
                <div class="nav-wrapper orange lighten-1">
                    <a href="#" data-activates="modules-nav" class="button-collapse"><i class="mdi-navigation-menu"></i></a>

                    <a href="<?= $this->base ?>contao/main.php" class="brand-logo">Contao Open Source CMS <?= VERSION . '.' . BUILD ?></a>

                    <ul class="right hide-on-med-and-down">
                        <li>
                            <a href="<?= $this->base ?>contao/main.php?do=login&amp;ref=<?= TL_REFERER_ID ?>" title="<?= $this->account ?>"><i class="material-icons left">account_circle</i><?= $this->username ?></a>
                        </li>
                        <li>
                            <a href="contao/preview.php<?= $this->frontendFile ?>" target="_blank" title="<?= $this->previewTitle ?>" accesskey="f"><i class="material-icons left">open_in_browser</i><?= $this->preview ?></a>
                        </li>
                        <li>
                            <a href="<?= $this->base ?>contao/main.php" title="<?= $this->homeTitle ?>" accesskey="h"><i class="material-icons left">home</i><?= $this->home ?></a>
                        </li>
                        <li>
                            <a href="<?= $this->base ?>contao/" title="<?= $this->logoutTitle ?>" accesskey="q"><i class="material-icons left">power_settings_new</i><?= $this->logout ?></a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
    <?php endif; ?>

    <main>
        <div class="container">
            <div class="alerts">
                <?php if ($this->isCoreOnlyMode): ?>
                    <div class="card hoverable red lighten-2">
                        <div class="card-content white-text">
                            <span class="card-title">Card Title</span>
                            <p><?= $this->coreOnlyMode ?></p>
                        </div>
                        <?php if ($this->isAdmin): ?>
                            <div class="card-action">
                                <a href="<?= $this->coreOnlyHref ?>" class="white-text"><?= $this->coreOnlyOff ?></a>
                            </div>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>

                <?php if ($this->isMaintenanceMode): ?>
                    <div class="card hoverable red lighten-2">
                        <div class="card-content white-text">
                            <p><?= $this->maintenanceMode ?></p>
                        </div>
                        <?php if ($this->isAdmin): ?>
                            <div class="card-action">
                                <a href="<?= $this->maintenanceHref ?>" class="white-text"><?= $this->maintenanceOff ?></a>
                            </div>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>

                <?php if ($this->needsCacheBuild): ?>
                    <div class="card hoverable red lighten-2">
                        <div class="card-content white-text">
                            <p><?= $this->buildCacheText ?></p>
                        </div>
                        <?php if ($this->isAdmin): ?>
                            <div class="card-action">
                                <a href="<?= $this->maintenanceHref ?>" class="white-text"><?= $this->buildCacheLink ?></a>
                            </div>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            </div>

            <?php if (\Input::get('do') || \Input::get('act')): // Do not display a card on welcome screen ?>
            <div class="card">
                <div class="card-content">
                    <h1 class="card-title"><?= $this->headline ?></h1>
            <?php else: ?>
            <h1><?= $this->headline ?></h1>
            <?php endif; ?>

                    <?php if ($this->managerHref): ?>
                        <div id="manager">
                            <a href="<?= $this->managerHref ?>" class="close" title="<?= specialchars($this->manager) ?>"><?= $this->manager ?></a>
                        </div>
                    <?php endif; ?>

                    <?php if ($this->error): ?>
                        <p class="tl_gerror"><?= $this->error ?></p>
                    <?php endif; ?>

                    <?= $this->main ?>
            <?php if (\Input::get('do') || \Input::get('act')): // Do not display a card on welcome screen ?>
                </div>
            </div>
            <?php endif; ?>
        </div>
    </main>

    <?php if (!$this->isPopup): ?>
        <footer class="page-footer orange lighten-2">
            <div class="container">
                <div class="row">
                    <span>
                        Contao Material Design by <a href="http://www.medialta.com" class="white-text" target="_blank">Medialta</a>
                    </span>
                    <a href="<?= $this->request ?>#top" class="white-text right" title="<?= $this->backToTop ?>" accesskey="t"><?= $this->top ?></a>
                    <a href="contao/preview.php<?= $this->frontendFile ?>" class="white-text right" target="_blank" title="<?= $this->previewTitle ?>"><?= $this->preview ?></a>
                </div>
            </div>
        </footer>

        <?php if ($this->pageOffset): ?>
            <script>//Backend.vScrollTo($('paste_hint') ? <?= $this->pageOffset + 20 ?> : <?= $this->pageOffset ?>)</script>
            <?php //System::setCookie('BE_PAGE_OFFSET', 0, 0); ?>
        <?php endif; ?>
    <?php endif; ?>

    <script type="text/javascript">
    $(".button-collapse").sideNav()
    $('#modules-nav .collapsible-header').click(function(e) { e.preventDefault() })
    </script>

    <?= ''//$this->mootools ?>

</body>
</html>
